<!--
  Filter by region, municipality => LOCATION
  Filter by entry parameters => DETAILS
  Filter by category, maincategory => CATEGORY
-->

<main>
  <kampakam-navbar></kampakam-navbar>
  <div class="container pb-5">
  <div class="forma justify-content-center align-items-center">
    <div class="row" [formGroup]="form">
      <div class="sm-col-6 formField" *ngIf="bigDisplay">
        <h6>Regije</h6>

        <p-dropdown
          [options]="regOptions"
          [(ngModel)]="regions"
          optionLabel="label"
          optionValue="value"
          formControlName="regions"
          (onChange)="regionChange($event)">
        </p-dropdown>
      </div>

      <div class="lg-col-8 sm-col-12 formField" *ngIf="!bigDisplay">
        <kampakam-mapa [displayNavbar]="false"></kampakam-mapa>
      </div>

      <div class="lg-col-4 sm-col-6">
        <!-- Location radius, choose from google maps?-->

        <div class="formField">
          <h6>Občine</h6>
          <p-multiSelect
            [options]="munOptions"
            [(ngModel)]="selectedMunicipalities"
            formControlName="municipality"
            optionLabel="label"
            [filter]="true"
            filterBy="label"
            optionValue="value"
            placeholder="Izberi občino"
          >
          </p-multiSelect>
        </div>

        <div class="formField">
        <h6>Ime</h6>
        <input
          class="ime"
          pInputText
          type="text"
          class="form-control"
          formControlName="name"
          placeholder="Izberi ime"
        />
        </div>

        <div class="formField">
        <h6>Cena</h6>
        <p-inputSwitch
          formControlName="price"
          [(ngModel)]="priceChecked"
        ></p-inputSwitch>
        </div>

        <div class="formField">
        <h6>Dostopnost</h6>
        <p-inputSwitch
          formControlName="accessibility"
          [(ngModel)]="accessibilityChecked"
        ></p-inputSwitch>
        </div>

        <div class="formField">
        <h6>Nastanitev</h6>
        <p-inputSwitch
          formControlName="accommodation"
          [(ngModel)]="accommodationChecked"
        ></p-inputSwitch>
        </div>

        <div class="formField">
        <h6>Letni čas</h6>
        <p-dropdown
          [options]="seasons"
          [ngModel]="selectedSeason"
          optionLabel="name"
          optionValue="name"
          placeholder="Izberi letni čas"
          formControlName="season"
        >
        </p-dropdown>
        </div>

        <div class="formField">
          <h6>Kategorije</h6>
          <p-multiSelect
            [options]="categoryOptions"
            [(ngModel)]="selectedCategories"
            formControlName="categories"
            optionLabel="name"
            [filter]="true"
            filterBy="name"
            optionValue="id"
            placeholder="Izberi kategorijo"
          >
          </p-multiSelect>
        </div>
      </div>

      <button pButton label="Poišči" (click)="submit()" class="mt-1"></button>
    </div>

    <div *ngIf="queryResult">
      <kampakam-query-result
        [(display)]="popupDisplay"
        (displayChange)="popupDisplay = $event"
        [data]="queryResult"
      ></kampakam-query-result>
    </div>
  </div>
</div>
</main>
